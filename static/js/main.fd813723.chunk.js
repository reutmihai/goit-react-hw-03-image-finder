(this["webpackJsonpreact-homework-template"]=this["webpackJsonpreact-homework-template"]||[]).push([[0],{13:function(e,a,t){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3CvRl","ImageGalleryItem-image":"ImageGalleryItem_ImageGalleryItem-image__1C-z-"}},14:function(e,a,t){e.exports={App:"App_App__2s_Fq",error:"App_error__yS4ld"}},15:function(e,a,t){e.exports={Overlay:"Modal_Overlay__2AxMb",Modal:"Modal_Modal__2WBTT"}},18:function(e,a,t){e.exports={ImageGallery:"ImageGallery_ImageGallery__DncjJ"}},22:function(e,a,t){e.exports={loader:"Loader_loader__1j2Bs"}},23:function(e,a,t){e.exports={Button:"Button_Button__3R1xi"}},25:function(e,a,t){e.exports=t(38)},37:function(e,a,t){},38:function(e,a,t){"use strict";t.r(a);var r=t(2),n=t.n(r),o=t(17),l=t.n(o),s=t(8),i=t.n(s);class c extends r.Component{constructor(){super(...arguments),this.state={searchQuery:""},this.handleSubmit=e=>{e.preventDefault();const{searchQuery:a}=this.state;""!==a.trim()?(this.props.onFormSubmit(a),this.setState({searchQuery:""})):alert("Please enter a search termin.")},this.handleChange=e=>{const{value:a}=e.target;this.setState({searchQuery:a})}}render(){return n.a.createElement("div",null,n.a.createElement("header",{className:i.a.Searchbar},n.a.createElement("form",{className:i.a.SearchForm,onSubmit:this.handleSubmit},n.a.createElement("button",{type:"submit",className:i.a["SearchForm-button"]},n.a.createElement("span",{className:i.a["SearchForm-button-label"]},"Search")),n.a.createElement("input",{className:i.a["SearchForm-input"],type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.searchQuery,onChange:this.handleChange}))))}}var m=t(13),h=t.n(m);var u=e=>{let{webformatURL:a,largeImageURL:t,onClick:r}=e;return n.a.createElement("li",{className:h.a.ImageGalleryItem,onClick:r},n.a.createElement("img",{src:a,alt:"",className:h.a["ImageGalleryItem-image"]}))},g=t(18),d=t.n(g);var p=e=>{let{images:a,onImageClick:t}=e;return n.a.createElement("ul",{className:d.a.ImageGallery},a.map(e=>{let{id:a,webformatURL:r,largeImageURL:o}=e;return n.a.createElement(u,{key:a,webformatURL:r,largeImageURL:o,onClick:()=>t(o,"Image description")})}))},S=t(40);const y="45884616-48de2ef17b1bd78226af0a3e8";async function _(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;try{const r=await S.a.get("",{params:{q:e,page:a,key:y,image_type:"photo",orientation:"horizontal",per_page:t}});if(0===r.data.hits.length)return[];return r.data.hits.map(e=>{let{id:a,webformatURL:t,largeImageURL:r}=e;return{id:a,webformatURL:t,largeImageURL:r}})}catch(r){throw console.log("Eroare in imgService:",r),r}}S.a.defaults.baseURL="https://pixabay.com/api/";var b=t(19),I=t(22),v=t.n(I);const E=()=>n.a.createElement("div",{className:v.a.loader},n.a.createElement(b.a,{visible:!0,width:"200",color:"#4fa94d",ariaLabel:"infinity-spin-loading"}));var f=t(14),L=t.n(f),w=t(23),C=t.n(w);var k=e=>{let{onClick:a,visible:t}=e;return t?n.a.createElement("button",{className:C.a.Button,onClick:a},"Load more"):null},x=t(15),R=t.n(x);class U extends r.Component{constructor(){super(...arguments),this.handleKeyDown=e=>{"Escape"===e.code&&this.props.onClose()},this.handleBackdropClick=e=>{e.currentTarget===e.target&&this.props.onClose()}}componentDidMount(){window.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown)}render(){const{largeImageURL:e,altText:a}=this.props;return n.a.createElement("div",{className:R.a.Overlay,onClick:this.handleBackdropClick},n.a.createElement("div",{className:R.a.Modal},n.a.createElement("img",{src:e,alt:a})))}}var M=U;class F extends r.Component{constructor(){super(...arguments),this.state={searchQuery:"",isLoading:!1,images:[],error:"",page:1},this.handleSearchSubmit=async e=>{try{this.setState({searchQuery:e,isLoading:!0,error:"",page:1});const a=await _(e);if(0===a.length)return void this.setState({images:[],error:"N-a fost gasit niciun rezultat."});this.setState({images:a})}catch(a){this.setState({images:[],error:"A ap\u0103rut o eroare la c\u0103utare."})}finally{this.setState({isLoading:!1})}},this.loadMoreImages=async()=>{this.setState(e=>({isLoading:!0,page:e.page+1}));const{searchQuery:e,page:a}=this.state;try{const t=await _(e,a);this.setState(e=>({images:[...e.images,...t]}))}catch(t){this.setState({error:"A aparut o eroare la incarcarea imaginilor."})}finally{this.setState({isLoading:!1})}},this.openModal=(e,a)=>{this.setState({showModal:!0,largeImageURL:e,altText:a})},this.closeModal=()=>{this.setState({showModal:!1,largeImageURL:"",altText:""})}}render(){const{images:e,error:a,isLoading:t,showModal:r,largeImageURL:o,altText:l}=this.state;return n.a.createElement("div",{className:L.a.App},n.a.createElement(c,{onFormSubmit:this.handleSearchSubmit}),n.a.createElement("div",null,a&&n.a.createElement("div",{className:L.a.error},a),t?n.a.createElement(E,null):n.a.createElement(p,{images:e,onImageClick:this.openModal})),n.a.createElement(k,{onClick:this.loadMoreImages,visible:e.length>0&&!t}),r&&n.a.createElement(M,{largeImageURL:o,altText:l,onClose:this.closeModal}))}}var N=F;t(37);l.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(N,null)))},8:function(e,a,t){e.exports={Searchbar:"Searchbar_Searchbar__DjWH3",SearchForm:"Searchbar_SearchForm__1ac2l","SearchForm-button":"Searchbar_SearchForm-button__3u-rY","SearchForm-button-label":"Searchbar_SearchForm-button-label__2bzU3","SearchForm-input":"Searchbar_SearchForm-input__j6qzO"}}},[[25,1,2]]]);
//# sourceMappingURL=main.fd813723.chunk.js.map